# 網站維護指南

## 資料備份與維護

### 自動備份功能

本系統提供完整的資料備份功能，包括資料庫和上傳檔案的備份。

#### 備份內容
- **資料庫備份**: SQLite 資料庫檔案 (`database.db`)
- **檔案備份**: 所有使用者上傳的檔案 (`uploads/` 目錄)

#### 使用備份功能

1. **登入管理員帳號**
   - 使用者名稱: `admin`
   - 密碼: `admin123`

2. **進入系統管理頁面**
   - 登入後點選左側選單的「系統管理」

3. **執行備份**
   - 在「系統備份管理」區塊中點選「執行備份」按鈕
   - 系統會自動備份資料庫和檔案
   - 備份完成後會顯示成功訊息

4. **查看備份歷史**
   - 點選「重新整理」按鈕查看最新的備份列表
   - 備份列表顯示檔案名稱、類型、大小和建立時間

5. **下載備份檔案**
   - 在備份列表中點選下載按鈕
   - 檔案會自動下載到本地電腦

### 手動備份 (使用腳本)

如果需要在伺服器端執行備份，可以使用備份腳本：

```bash
# 進入專案目錄
cd /path/to/your/project

# 執行備份腳本
node scripts/backup.js
```

### 備份檔案說明

#### 檔案命名規則
- 資料庫備份: `database_YYYYMMDD_HHMMSS.db`
- 檔案備份: `uploads_YYYYMMDD_HHMMSS.tar.gz`

#### 備份保留政策
- 系統自動保留最近 10 個備份檔案
- 超過數量限制的舊備份會自動刪除

### 資料還原

#### 還原資料庫
1. 停止網站服務
2. 將備份的資料庫檔案覆蓋到 `database.db`
3. 重新啟動服務

#### 還原上傳檔案
1. 解壓縮備份的檔案 (`uploads_*.tar.gz`)
2. 將解壓縮的內容覆蓋到 `uploads/` 目錄

### Render 部署環境注意事項

#### 持久化儲存
- Render 的免費方案不提供持久化儲存
- 建議定期下載備份檔案到本地保存
- 考慮升級到付費方案以獲得持久化儲存

#### 環境變數設定
確保在 Render 中設定以下環境變數：
- `NODE_ENV=production`
- `SESSION_SECRET=your-secret-key`

### 定期維護建議

1. **每日備份**: 建議每天執行一次完整備份
2. **本地保存**: 定期將備份檔案下載到本地電腦保存
3. **測試還原**: 定期測試備份檔案的還原功能
4. **監控日誌**: 檢查系統日誌確保服務正常運行
5. **更新依賴**: 定期更新 Node.js 套件以確保安全性

### 故障排除

#### 備份失敗
- 檢查磁碟空間是否足夠
- 確認備份目錄的寫入權限
- 查看伺服器日誌了解錯誤詳情

#### 下載失敗
- 確認備份檔案存在
- 檢查網路連線狀況
- 嘗試重新整理頁面後再次下載

### 聯絡資訊

如有任何技術問題或需要協助，請聯絡系統管理員。

---

**重要提醒**: 請定期備份資料，並妥善保管備份檔案，以確保資料安全。